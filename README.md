# 머니 뿌리기 프로그램

1. POST '/api/money-sprinkle'  [머니 뿌리기]
2. PUT  '/api/money-distribution/{token}' [token의 뿌리기 건에서 머니 받기]
3. GET  '/api/money-sprinkle/{token}'    [token의 뿌리기 건 조회]

<3자리의 임의의 문자열로 token 만들기>
1. 대문자, 소문자 중 random 문자를 선택해 이어붙여 3자리의 문자열이 되면 token 완성
2. 1에서 완성된 token이 이미 발급되어 저장 돼있는 토큰인지 확인
3. 2에서 확인 한 결과 이미 발급 되었던 토큰이라면 1단계로 돌아가서 다시 진행
4. 2에서 확인 한 결과 중복 된 token이 없다면 return

<뿌린 돈을 뿌린 인원 수에 맞게 분배하기>
1. 뿌려진 돈을 (뿌린 인원 * 2) 로 나눈 후 계산 된 금액을 기본 머니로 정의한다.
2. 뿌린 인원 수에 맞게 초기화 된 배열에 모두 기본 머니를 넣어준다. (0원을 받는 인원이 없도록)
3. (뿌린 인원 * 2) 만큼 있던 기본 머니에서 뿌린 인원에 맞게 넣어줬으므로 앞으로 더 분배해야 할 횟수는 (뿌린 인원 * 2) - 뿌린인원 이 된다.
4. (뿌린 인원 * 2) - 뿌린 인원 만큼 반복하여 random 한 사람에게 기본 머니를 넣어준다.
5. 돈이 모두 분배 된 배열을 return 

<머니 뿌리기>
1. <3자리의 임의의 문자열로 token 만들기> 로 token을 생성한 후 뿌리기 데이터를 저장한다. (뿌린 시각에서 10분, 7일 후의 date를 '받기 가능 시각', '조회 가능 시각' 으로 저장한다)
2. <뿌린 돈을 뿌린 인원 수에 맞게 분배하기> 로 돈을 분배하여 분배 데이터를 저장한다.

<머니 받기>
1. token에 해당하는 뿌리기 데이터가 현재 받을 수 있는 상태(받기 가능 시각이 지나지 않은 상태)이면 데이터를 가져온다.
2. 가져온 데이터의 뿌린 사람이 받기를 호출한 사람과 같으면 받기 실패.
3. 가져온 데이터의 뿌려진 방이 받기를 호출한 방과 다르면 받기 실패.
4. 받기를 호출한 사용자가 해당 token에 분배 데이터를 할당 받은 적이 있다면 받기 실패.
5. 더 이상 분배 받을 수 있는 분배 데이터가 없다면 받기 실패.
6. 위의 단계를 모두 통과한 경우 할당 되지 않은 분배 데이터 중 하나를 받기 호출한 사용자에게 할당.
7. 할당 금액 return

<머니 뿌리기 조회>
1. token에 해당하는 뿌리기 데이터가 현재 조회할 수 있는 상태(조회 가능 시각이 지나지 않은 상태)이면 데이터를 가져온다.
2. 가져온 데이터의 뿌린 사람이 조회를 호출한 사람과 다르면 조회 실패.
3. 가져온 데이터의 분배 데이터 중 할당 완료된 데이터를 가져온다.
4. 할당 완료 된 데이터로 받기 완료 된 금액을 계산한다.
5. 가져온 데이터와 계산된 금액을 결과 객체에 넣는다.
6. 결과 return

